<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <title>Robertas Chalett - Calculadora y Disponibilidad</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Free HTML Templates" name="keywords">
    <meta content="Free HTML Templates" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Estilos personalizados para Calculadora y Calendario -->
    <style>
        /* ===== ESTILOS PARA LA CALCULADORA Y CALENDARIO ===== */
        .feature-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s;
            height: 100%;
            border: 1px solid #eaeaea;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .feature-header {
            background: linear-gradient(135deg, #79b52f 0%, #5a8e22 100%);
            color: white;
            padding: 20px;
            border-radius: 10px 10px 0 0;
            margin-bottom: 20px;
        }
        
        .feature-header h3 {
            font-size: 1.5rem;
            margin: 0;
            font-weight: 600;
        }
        
        .feature-header i {
            font-size: 1.8rem;
            margin-right: 10px;
        }
        
        .calculator-form .form-group label {
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            display: block;
        }
        
        .calculator-form .form-control, 
        .calculator-form .form-select {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 12px 15px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .calculator-form .form-control:focus, 
        .calculator-form .form-select:focus {
            border-color: #79b52f;
            box-shadow: 0 0 0 0.2rem rgba(121, 181, 47, 0.25);
        }
        
        .capacity-box {
            background-color: #f8f9fa;
            border-left: 4px solid #79b52f;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .capacity-box h5 {
            color: #333;
            font-size: 1.1rem;
            margin-bottom: 8px;
        }
        
        .btn-calculate {
            background: linear-gradient(135deg, #79b52f 0%, #5a8e22 100%);
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .btn-calculate:hover {
            background: linear-gradient(135deg, #5a8e22 0%, #4a7a1c 100%);
            color: white;
            transform: translateY(-2px);
        }
        
        .result-box {
            display: none;
            background-color: #f8f9fa;
            border: 2px dashed #79b52f;
            border-radius: 10px;
            padding: 25px;
            margin-top: 25px;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .result-title {
            color: #79b52f;
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }
        
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .result-item.total {
            font-weight: 700;
            font-size: 1.2rem;
            color: #333;
            border-top: 2px solid #79b52f;
            margin-top: 15px;
            padding-top: 15px;
            border-bottom: none;
        }
        
        .error-message {
            background-color: rgba(220, 53, 69, 0.1);
            color: #dc3545;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #dc3545;
            display: none;
        }
        
        /* Estilos para pestañas del calendario */
        .calendar-tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 20px;
        }
        
        .calendar-tab {
            flex: 1;
            padding: 12px;
            background: none;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            color: #666;
            font-weight: 500;
            text-align: center;
        }
        
        .calendar-tab.active {
            color: #79b52f;
            border-bottom: 3px solid #79b52f;
            font-weight: 600;
        }
        
        .calendar-wrapper {
            width: 100%;
            height: 500px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .calendar-info {
            background-color: #e8f4fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin-top: 20px;
            border-radius: 0 8px 8px 0;
            font-size: 0.95rem;
        }
        
        .calendar-info h5 {
            color: #0d47a1;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        .indicator.weekday {
            background-color: #3498db;
        }
        
        .indicator.weekend {
            background-color: #e74c3c;
        }
        
        .indicator.high-season {
            background-color: #ff9800;
        }
        
        .indicator.normal-season {
            background-color: #4caf50;
        }
        
        .disclaimer-box {
            background-color: #fff8e1;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9rem;
            text-align: center;
            border-left: 4px solid #ffc107;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .calendar-wrapper {
                height: 400px;
            }
            
            .feature-header h3 {
                font-size: 1.3rem;
            }
            
            .result-item {
                flex-direction: column;
            }
            
            .result-item span:last-child {
                margin-top: 5px;
                font-weight: 600;
            }
        }
    </style>
</head>

<body>
    <!-- Topbar Start -->
    <div class="container-fluid bg-light pt-3 d-none d-lg-block">
        <div class="container">
            <div class="row">
                <div class="col-lg-6 text-center text-lg-left mb-2 mb-lg-0">
                    <div class="d-inline-flex align-items-center">
                        <p><i class="fa fa-envelope mr-2"></i>gorr720828@gmail.com</p>
                        <p class="text-body px-3">|</p>
                        <p><i class="fa fa-phone-alt mr-2"></i>+52 55 1139 3996</p>
                    </div>
                </div>
                <div class="col-lg-6 text-center text-lg-right">
                    <div class="d-inline-flex align-items-center">
                        <a class="text-primary px-3" href="https://www.facebook.com/robertogomezrobles" target="_BLANK">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a class="text-primary px-3" href="https://www.airbnb.mx/rooms/44634092?search_mode=regular_search&adults=1&check_in=2025-03-23&check_out=2025-03-28&children=0&infants=0&source_impression_id=p3_1742498719_P3m6G-9Hez8qjTl7&previous_page_section_name=1000&heroPhotoId=1497662556" target="_BLANK">
                            <i class="fab fa-airbnb"></i>
                        </a>
                        <a class="text-primary px-3" href="https://wa.me/525559024785" target="_BLANK">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                        <a class="text-primary px-3" href="https://www.instagram.com/rentacabana_robertas_zacatlan?igsh=MTA4d3JndzdieWtheA==" target="_BLANK">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->

    <!-- Navbar Start -->
    <div class="container-fluid position-relative nav-bar p-0">
        <div class="container-lg position-relative p-0 px-lg-3" style="z-index: 9;">
            <nav class="navbar navbar-expand-lg bg-light navbar-light shadow-lg py-3 py-lg-0 pl-3 pl-lg-5">
                <a href="" class="navbar-brand">
                    <h1 class="m-0 text-primary"><span class="text-dark">Roberta</span>'s</h1>
                </a>
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-between px-3" id="navbarCollapse">
                    <div class="navbar-nav ml-auto py-0">
                        <a href="index.html" class="nav-item nav-link">Inicio</a>
                        <a href="about.html" class="nav-item nav-link">Nosotros</a>
                        <a href="service.html" class="nav-item nav-link">Servicios</a>
                        <a href="package.html" class="nav-item nav-link active">Calculadora & Disponibilidad</a>
                        <a href="contact.html" class="nav-item nav-link">Contacto</a>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <!-- Navbar End -->

    <!-- Header Start -->
    <div class="container-fluid page-header">
        <div class="container">
            <div class="d-flex flex-column align-items-center justify-content-center" style="min-height: 400px">
                <h3 class="display-4 text-white text-uppercase">Calculadora & Disponibilidad</h3>
                <div class="d-inline-flex text-white">
                    <p class="m-0 text-uppercase"><a class="text-white" href="">Inicio</a></p>
                    <i class="fa fa-angle-double-right pt-1 px-3"></i>
                    <p class="m-0 text-uppercase">Calculadora & Disponibilidad</p>
                </div>
            </div>
        </div>
    </div>
    <!-- Header End -->

    <!-- Booking Form Start (Manteniendo el formulario de reserva existente) -->
    <div class="container-fluid booking mt-5 pb-5">
        <div class="container pb-5">
            <div class="bg-light shadow rounded-lg" style="padding: 40px; box-shadow: 0 5px 15px rgba(0,0,0,0.1)!important;">
                <form id="reservaForm" onsubmit="enviarWhatsApp(event)">
                    <div class="row align-items-center">
                        <!-- Primera fila de campos -->
                        <div class="col-md-12 mb-4">
                            <div class="row">
                                <!-- Nombre completo -->
                                <div class="col-md-6 mb-3 mb-md-0">
                                    <label for="nombreCliente" class="form-label text-primary mb-1">Nombre completo</label>
                                    <input type="text" class="form-control p-3 border-primary" id="nombreCliente" placeholder="Ej: Juan Pérez" required
                                           style="border-radius: 8px; border: 1px solid #ced4da; transition: all 0.3s;">
                                </div>
                                
                                <!-- Teléfono -->
                                <div class="col-md-6 mb-3 mb-md-0">
                                    <label for="telefonoCliente" class="form-label text-primary mb-1">Teléfono celular</label>
                                    <input type="tel" class="form-control p-3 border-primary" id="telefonoCliente" placeholder="Ej: 55 1234 5678" required
                                           style="border-radius: 8px; border: 1px solid #ced4da; transition: all 0.3s;">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Segunda fila de campos -->
                        <div class="col-md-12">
                            <div class="row">
                                <!-- Cabaña -->
                                <div class="col-md-3 mb-3 mb-md-0">
                                    <label for="cabana" class="form-label text-primary mb-1">Cabaña</label>
                                    <select class="form-select p-3 border-primary" id="cabana" required
                                            style="border-radius: 8px; border: 1px solid #ced4da; height: auto; transition: all 0.3s;">
                                        <option value="" selected disabled>Seleccione una opción</option>
                                        <option value="Roberta's Chalett">Roberta's Chalett</option>
                                        <option value="Roberta's Lille">Roberta's Lille</option>
                                    </select>
                                </div>
                                
                                <!-- Check-in -->
                                <div class="col-md-3 mb-3 mb-md-0">
                                    <label for="checkin" class="form-label text-primary mb-1">Check-in</label>
                                    <div class="date" id="date1" data-target-input="nearest">
                                        <input type="date" class="form-control p-3 border-primary" id="checkin" 
                                               placeholder="Fecha de entrada" required
                                               style="border-radius: 8px; border: 1px solid #ced4da; transition: all 0.3s;"
                                               onchange="setMinCheckoutDate()">
                                    </div>
                                </div>
                                
                                <!-- Check-out -->
                                <div class="col-md-3 mb-3 mb-md-0">
                                    <label for="checkout" class="form-label text-primary mb-1">Check-out</label>
                                    <div class="date" id="date2" data-target-input="nearest">
                                        <input type="date" class="form-control p-3 border-primary" id="checkout" 
                                               placeholder="Fecha de salida" required
                                               style="border-radius: 8px; border: 1px solid #ced4da; transition: all 0.3s;">
                                    </div>
                                </div>
                                
                                <!-- Cantidad de personas -->
                                <div class="col-md-3 mb-3 mb-md-0">
                                    <label for="cantidad" class="form-label text-primary mb-1">Personas</label>
                                    <select class="form-select p-3 border-primary" id="cantidad" required
                                            style="border-radius: 8px; border: 1px solid #ced4da; height: auto; transition: all 0.3s;">
                                        <option value="" selected disabled>Seleccione</option>
                                        <option value="1">1 persona</option>
                                        <option value="2">2 personas</option>
                                        <option value="3">3 personas</option>
                                        <option value="4">4 personas</option>
                                        <option value="5">5 personas</option>
                                        <option value="6">6 personas</option>
                                        <option value="7">7 personas</option>
                                        <option value="8">8 personas</option>
                                        <option value="9">9 personas</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Botón de envío -->
                        <div class="col-md-12 mt-4">
                            <button class="btn btn-primary btn-block py-3" type="submit" 
                                    style="border-radius: 8px; font-weight: 600; letter-spacing: 1px; transition: all 0.3s;">
                                <i class="fas fa-paper-plane me-2"></i> Enviar Reserva
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Booking End -->

    <!-- Calculadora y Calendario Start -->
    <div class="container-fluid py-5">
        <div class="container pt-5 pb-3">
            <div class="text-center mb-5">
                <h6 class="text-primary text-uppercase" style="letter-spacing: 5px;">Herramientas de Planificación</h6>
                <h1>Calcula tu Presupuesto y Consulta Disponibilidad</h1>
                <p class="mb-0">Utiliza nuestra calculadora para estimar el costo de tu estancia y consulta los calendarios en tiempo real para planificar tu visita.</p>
            </div>
            
            <div class="row">
                <!-- Columna de la Calculadora -->
                <div class="col-lg-6 mb-4">
                    <div class="feature-card">
                        <div class="feature-header">
                            <h3><i class="fas fa-calculator"></i> Calculadora de Presupuesto</h3>
                        </div>
                        <div class="p-4">
                            <p class="mb-3">Calcula el costo aproximado de tu estancia según la cabaña, número de personas, fechas y temporada. Los precios son informativos y sujetos a disponibilidad.</p>
                            
                            <div class="error-message" id="errorMessage"></div>
                            
                            <form class="calculator-form" id="calculatorForm">
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label for="cabinType">Tipo de cabaña:</label>
                                        <select class="form-select" id="cabinType" required>
                                            <option value="">Selecciona una cabaña</option>
                                            <option value="chalet">Roberta's Chalet</option>
                                            <option value="lille">Roberta's Lille</option>
                                        </select>
                                    </div>
                                    
                                    <div class="col-md-12 mb-3">
                                        <label for="peopleCount">Número de personas:</label>
                                        <input type="number" class="form-control" id="peopleCount" min="1" max="12" value="2" required>
                                    </div>
                                    
                                    <div id="capacityInfo" class="capacity-box">
                                        <!-- Información de capacidad se actualizará aquí con JS -->
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <label for="checkInDate">Fecha de entrada:</label>
                                        <input type="date" class="form-control" id="checkInDate" required>
                                    </div>
                                    
                                    <div class="col-md-6 mb-3">
                                        <label for="checkOutDate">Fecha de salida:</label>
                                        <input type="date" class="form-control" id="checkOutDate" required>
                                    </div>
                                    
                                    <div class="col-md-12">
                                        <button type="button" class="btn-calculate" id="calculateButton">
                                            <i class="fas fa-calculator me-2"></i> Calcular Presupuesto
                                        </button>
                                    </div>
                                </div>
                            </form>
                            
                            <div class="result-box" id="resultContainer">
                                <h4 class="result-title">Presupuesto Estimado</h4>
                                <div class="result-item">
                                    <span>Cabaña:</span>
                                    <span id="resultCabin"></span>
                                </div>
                                <div class="result-item">
                                    <span>Personas:</span>
                                    <span id="resultPeople"></span>
                                </div>
                                <div class="result-item">
                                    <span>Noches:</span>
                                    <span id="resultNights"></span>
                                </div>
                                <div class="result-item">
                                    <span>Temporada:</span>
                                    <span id="resultSeason"></span>
                                </div>
                                <div class="result-item">
                                    <span>Precio por noche (promedio):</span>
                                    <span id="resultPricePerNight"></span>
                                </div>
                                <div class="result-item">
                                    <span>Extras en sillón:</span>
                                    <span id="resultExtraCost"></span>
                                </div>
                                <div class="result-item total">
                                    <span>Total estimado:</span>
                                    <span id="resultTotal"></span>
                                </div>
                                
                                <div id="nightBreakdown" style="margin-top: 15px; display: none;">
                                    <h5 style="color: #333; margin-bottom: 10px; font-weight: 600;">Desglose por noches:</h5>
                                    <div id="nightDetails"></div>
                                </div>
                                
                                <div class="disclaimer-box mt-3">
                                    <i class="fas fa-info-circle me-2"></i> Precio aproximado. Sujeto a disponibilidad.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Columna del Calendario -->
                <div class="col-lg-6 mb-4">
                    <div class="feature-card">
                        <div class="feature-header">
                            <h3><i class="far fa-calendar-alt"></i> Calendario de Disponibilidad</h3>
                        </div>
                        <div class="p-4">
                            <p class="mb-3">Consulta las fechas disponibles para tu estancia. Los días marcados indican períodos ocupados. El calendario es informativo y se actualiza regularmente.</p>
                            
                            <div class="calendar-tabs">
                                <button class="calendar-tab active" data-cabin="chalet">Robertas Chalet</button>
                                <button class="calendar-tab" data-cabin="lille">Robertas Lille</button>
                            </div>
                            
                            <div class="calendar-wrapper">
                                <!-- Calendario de Google para Chalet -->
                                <iframe id="chaletCalendar" src="https://calendar.google.com/calendar/embed?height=500&wkst=1&ctz=America%2FMexico_City&title=Robertas%20Chalet%20-%20Disponibilidad&showNav=1&showDate=1&showPrint=0&showTabs=1&showCalendars=0&src=Njc1MDM3NjliNzA4NDZlNTBlNjFjNDJkZmU2NThjN2NjZTI0YTllYjU1MzFkNmIwMzJlZjk1MDIzOWQ0ODdhMUBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23039BE5" 
                                        style="border: 0; width: 100%; height: 100%;" 
                                        frameborder="0" 
                                        scrolling="no">
                                </iframe>
                                
                                <!-- Calendario de Google para Lille -->
                                <iframe id="lilleCalendar" src="https://calendar.google.com/calendar/embed?height=500&wkst=1&ctz=America%2FMexico_City&title=Robertas%20Lille%20-%20Disponibilidad&showNav=1&showDate=1&showPrint=0&showTabs=1&showCalendars=0&src=MjI1ZTZlYTVmNTg3YTEzNzA0NjgwZGU2YmIzODM4ZmQ3OTUwMjdiYTlhOTM5NGE4MmZiNzBjNzVkYmU4YWIxMEBncm91cC5jYWxlbmRhci5nb29nbGUuY29t&color=%23D50000" 
                                        style="border: 0; width: 100%; height: 100%; display: none;" 
                                        frameborder="0" 
                                        scrolling="no">
                                </iframe>
                            </div>
                            
                            <div class="calendar-info">
                                <h5><i class="fas fa-info-circle me-2"></i> Cómo interpretar el calendario:</h5>
                                <ul class="mb-0">
                                    <li><strong>Días disponibles:</strong> Aparecen sin color o con un tono claro</li>
                                    <li><strong>Días ocupados/reservados:</strong> Aparecen marcados en color (eventos en el calendario)</li>
                                    <li><strong>Para reservar:</strong> Consulta disponibilidad y utiliza el formulario de reserva superior</li>
                                </ul>
                            </div>
                            
                            <div class="disclaimer-box">
                                <i class="fas fa-exclamation-circle me-2"></i> Este calendario es informativo. Para confirmar disponibilidad y realizar reservaciones, utiliza el formulario de reserva o contáctanos directamente.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Calculadora y Calendario End -->

    <!-- Footer Start -->
    <div class="container-fluid bg-dark text-white-50 py-5 px-sm-3 px-lg-5" style="margin-top: 90px;">
        <div class="row pt-5">
            <div class="col-lg-3 col-md-6 mb-5">
                <a href="" class="navbar-brand">
                    <h1 class="text-primary"><span class="text-white">Roberta</span>'s</h1>
                </a>
                <p>Escápate a la naturaleza, descansa en confort</p>
                <h6 class="text-white text-uppercase mt-4 mb-3" style="letter-spacing: 5px;"> Síguenos</h6>
                <div class="d-flex justify-content-start">
                    <a class="btn btn-outline-primary btn-square mr-2" href="https://www.airbnb.mx/rooms/44634092?search_mode=regular_search&adults=1&check_in=2025-03-23&check_out=2025-03-28&children=0&infants=0&source_impression_id=p3_1742498719_P3m6G-9Hez8qjTl7&previous_page_section_name=1000&heroPhotoId=1497662556" target="_BLANK"><i class="fab fa-airbnb"></i></a>
                    <a class="btn btn-outline-primary btn-square mr-2" href="https://www.facebook.com/robertogomezrobles" target="_BLANK"><i class="fab fa-facebook-f"></i></a>
                    <a class="btn btn-outline-primary btn-square" href="https://www.instagram.com/rentacabana_robertas_zacatlan?igsh=MTA4d3JndzdieWtheA==" target="_BLANK"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-5">
                <h5 class="text-white text-uppercase mb-4" style="letter-spacing: 5px;"></h5>
                <div class="d-flex flex-column justify-content-start">
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-5">
                <h5 class="text-white text-uppercase mb-4" style="letter-spacing: 5px;"></h5>
                <div class="d-flex flex-column justify-content-start">
                </div>
            </div>
            <div class="col-lg-3 col-md-6 mb-5">
                <h5 class="text-white text-uppercase mb-4" style="letter-spacing: 5px;">Contáctanos</h5>
                <p><i class="fa fa-map-marker-alt mr-2"></i> Carr Zacatlán-San Miguel Tenango Km 6, 73316 Pue.</p>
                <p><i class="fa fa-phone-alt mr-2"></i> 55 1139 3996</p>
                <p><i class="fa fa-envelope mr-2"></i>gorr720828@gmail.com</p>
            </div>
        </div>
    </div>
    <div class="container-fluid bg-dark text-white border-top py-4 px-sm-3 px-md-5" style="border-color: rgba(256, 256, 256, .1) !important;">
        <div class="row">
            <div class="col-lg-6 text-center text-md-left mb-3 mb-md-0">
                <p class="m-0 text-white-50">Copyright &copy; <a href="#">Roberta's Chalett</a>. All Rights Reserved.</a>
                </p>
            </div>
            <div class="col-lg-6 text-center text-md-right">
                <p class="m-0 text-white-50"><a href="https://htmlcodex.com"></a>
                </p>
            </div>
        </div>
    </div>
    <!-- Footer End -->

    <!-- WhatsApp Chat Widget -->
    <div class="whatsapp-widget">
        <div class="whatsapp-header">
            <div class="whatsapp-title">
                <i class="fab fa-whatsapp"></i>
                <h3>Chatea con nosotros</h3>
            </div>
            <button class="close-chat">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="whatsapp-body">
            <div class="welcome-message">
                <p>¡Hola! ¿En qué podemos ayudarte? Escríbenos directamente por WhatsApp y te atenderemos de inmediato.</p>
            </div>
            
            <div class="quick-options">
                <button class="quick-btn" data-message="Hola, quiero hacer una reserva">
                    <i class="fas fa-calendar-check"></i> Hacer reservación
                </button>
                <button class="quick-btn" data-message="¿Qué servicios incluyen las cabañas?">
                    <i class="fas fa-concierge-bell"></i> Preguntar por servicios
                </button>
                <button class="quick-btn" data-message="¿Tienen disponibilidad para...?">
                    <i class="fas fa-calendar-alt"></i> Consultar disponibilidad
                </button>
            </div>
        </div>
        
        <div class="whatsapp-footer">
            <a href="https://wa.me/5215511393996" class="whatsapp-link" target="_blank">
                <i class="fab fa-whatsapp"></i> Abrir WhatsApp
            </a>
        </div>
    </div>

    <button class="whatsapp-toggle" style="display: none;">
        <i class="fab fa-whatsapp"></i>
    </button>

    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="fa fa-angle-double-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>

    <!-- Script para la Calculadora y Calendario -->
    <script>
        // ===== FUNCIONES PARA EL FORMULARIO DE RESERVA EXISTENTE =====
        function setMinCheckoutDate() {
            const checkinInput = document.getElementById('checkin');
            const checkoutInput = document.getElementById('checkout');
            
            if (checkinInput.value) {
                checkoutInput.min = checkinInput.value;
                
                // Si la fecha actual de checkout es anterior a la nueva fecha de checkin
                if (checkoutInput.value && new Date(checkoutInput.value) < new Date(checkinInput.value)) {
                    checkoutInput.value = '';
                }
            }
        }

        function formatDateForDisplay(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }

        function enviarWhatsApp(event) {
            event.preventDefault();
            
            // Obtener los valores del formulario
            const nombre = document.getElementById('nombreCliente').value;
            const telefono = document.getElementById('telefonoCliente').value;
            const cabana = document.getElementById('cabana').value;
            const checkin = formatDateForDisplay(document.getElementById('checkin').value);
            const checkout = formatDateForDisplay(document.getElementById('checkout').value);
            const cantidad = document.getElementById('cantidad').value;
            
            // Validar que la fecha de checkout no sea anterior a la de checkin
            const checkinDate = new Date(document.getElementById('checkin').value);
            const checkoutDate = new Date(document.getElementById('checkout').value);
            
            if (checkoutDate <= checkinDate) {
                alert('La fecha de salida debe ser posterior a la fecha de entrada');
                return;
            }
            
            // Crear mensaje para WhatsApp
            const mensaje = `*Nueva Reserva*%0A%0A` +
                            `*Nombre:* ${nombre}%0A` +
                            `*Teléfono:* ${telefono}%0A` +
                            `*Cabaña:* ${cabana}%0A` +
                            `*Check-in:* ${checkin}%0A` +
                            `*Check-out:* ${checkout}%0A` +
                            `*Personas:* ${cantidad}`;
            
            // Número de WhatsApp de la empresa
            const whatsappNumber = '525559024785';
            
            // Abrir WhatsApp con el mensaje
            window.open(`https://wa.me/${whatsappNumber}?text=${mensaje}`, '_blank');
            
            // Opcional: Resetear el formulario después del envío
            document.getElementById('reservaForm').reset();
            
            // Opcional: Mostrar mensaje de confirmación
            alert('Gracias por tu reserva. Serás contactado pronto por WhatsApp.');
        }

        // ===== FUNCIONES PARA LA CALCULADORA =====
        // Establecer año actual en el footer (si es necesario)
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar fechas mínimas en los inputs de fecha de la calculadora
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            // Formatear como YYYY-MM-DD
            const formatDateForInput = (date) => {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                return `${year}-${month}-${day}`;
            };
            
            document.getElementById('checkInDate').min = formatDateForInput(today);
            document.getElementById('checkOutDate').min = formatDateForInput(tomorrow);
            document.getElementById('checkInDate').value = formatDateForInput(today);
            document.getElementById('checkOutDate').value = formatDateForInput(tomorrow);
            
            // Precios según la imagen proporcionada
            window.prices = {
                chalet: {
                    weekday: { // Domingo a Jueves
                        1: 2000, 2: 2000, 3: 2000, 4: 2000, 5: 2000, 6: 2000, 7: 2050, 8: 2300, 9: 2550
                    },
                    weekend: { // Viernes y Sábado
                        1: 2500, 2: 2500, 3: 2500, 4: 2500, 5: 2500, 6: 2500, 7: 2750, 8: 3000, 9: 3250
                    },
                    extraSofabed: 250 // Por persona extra por noche
                },
                lille: {
                    // Precios de Lille (asumiendo similar estructura, ajustar según datos reales)
                    weekday: { // Domingo a Jueves
                        1: 1600, 2: 1600, 3: 1600, 4: 1600
                    },
                    weekend: { // Viernes y Sábado
                        1: 2000, 2: 2000, 3: 2000, 4: 2000
                    },
                    extraSofabed: 250 // Por persona extra por noche
                }
            };
            
            // Temporadas altas (para aplicar recargo)
            window.highSeasons = [
                { month: 3, name: "Marzo/Abril (Semana Santa)" }, // Marzo (3) y Abril (4)
                { month: 6, name: "Junio" },
                { month: 7, name: "Julio" },
                { month: 10, name: "Octubre" },
                { month: 12, startDay: 20, endDay: 31, name: "Navidad (20-31 Dic)" }
            ];
            
            // Factor de incremento para temporada alta
            window.highSeasonFactor = 1.2; // 20% más en temporada alta
            
            // Actualizar información de capacidad según la cabaña seleccionada
            const cabinTypeSelect = document.getElementById('cabinType');
            const peopleCountInput = document.getElementById('peopleCount');
            const capacityInfoDiv = document.getElementById('capacityInfo');
            
            window.updateCapacityInfo = function() {
                const cabinType = cabinTypeSelect.value;
                let html = '';
                
                if (cabinType === 'chalet') {
                    html = `
                        <h5><i class="fas fa-home me-2"></i> Robertas Chalet</h5>
                        <p class="mb-1"><i class="fas fa-bed me-2"></i> Capacidad: 9 personas en camas</p>
                        <p class="mb-1"><i class="fas fa-couch me-2"></i> Hasta 3 personas extra en sillones</p>
                        <p class="mb-0"><i class="fas fa-users me-2"></i> Máximo total: 12 personas</p>
                    `;
                    peopleCountInput.max = 12;
                    peopleCountInput.value = Math.min(parseInt(peopleCountInput.value), 9);
                    
                } else if (cabinType === 'lille') {
                    html = `
                        <h5><i class="fas fa-home me-2"></i> Robertas Lille</h5>
                        <p class="mb-1"><i class="fas fa-bed me-2"></i> Capacidad: 4 personas en camas</p>
                        <p class="mb-1"><i class="fas fa-couch me-2"></i> Hasta 1 persona extra en sillón</p>
                        <p class="mb-0"><i class="fas fa-users me-2"></i> Máximo total: 5 personas</p>
                    `;
                    peopleCountInput.max = 5;
                    peopleCountInput.value = Math.min(parseInt(peopleCountInput.value), 4);
                    
                } else {
                    html = '<p class="mb-0">Selecciona una cabaña para ver su capacidad</p>';
                    peopleCountInput.max = 12;
                }
                
                capacityInfoDiv.innerHTML = html;
            };
            
            cabinTypeSelect.addEventListener('change', updateCapacityInfo);
            updateCapacityInfo(); // Llamada inicial
            
            // Calcular presupuesto
            document.getElementById('calculateButton').addEventListener('click', calculateBudget);
            
            // Calcular automáticamente al cambiar fechas
            document.getElementById('checkInDate').addEventListener('change', function() {
                // Ajustar fecha mínima de salida
                const checkInDate = new Date(this.value);
                const minCheckOut = new Date(checkInDate);
                minCheckOut.setDate(minCheckOut.getDate() + 1);
                
                document.getElementById('checkOutDate').min = minCheckOut.toISOString().split('T')[0];
                
                // Si la fecha de salida es anterior a la nueva fecha mínima, actualizarla
                const checkOutDate = new Date(document.getElementById('checkOutDate').value);
                if (checkOutDate <= checkInDate) {
                    document.getElementById('checkOutDate').value = minCheckOut.toISOString().split('T')[0];
                }
                
                // Calcular automáticamente si todos los campos están completos
                const cabinType = document.getElementById('cabinType').value;
                const peopleCount = document.getElementById('peopleCount').value;
                const checkInDateVal = document.getElementById('checkInDate').value;
                const checkOutDateVal = document.getElementById('checkOutDate').value;
                
                if (cabinType && peopleCount && checkInDateVal && checkOutDateVal) {
                    calculateBudget();
                }
            });
            
            // Calcular automáticamente si todos los campos están completos
            const formInputs = document.querySelectorAll('#calculatorForm select, #calculatorForm input');
            formInputs.forEach(input => {
                input.addEventListener('change', function() {
                    const cabinType = document.getElementById('cabinType').value;
                    const peopleCount = document.getElementById('peopleCount').value;
                    const checkInDate = document.getElementById('checkInDate').value;
                    const checkOutDate = document.getElementById('checkOutDate').value;
                    
                    if (cabinType && peopleCount && checkInDate && checkOutDate) {
                        calculateBudget();
                    }
                });
            });
            
            // Calcular al cargar la página si hay datos suficientes
            const cabinType = document.getElementById('cabinType').value;
            const peopleCount = document.getElementById('peopleCount').value;
            const checkInDate = document.getElementById('checkInDate').value;
            const checkOutDate = document.getElementById('checkOutDate').value;
            
            if (cabinType && peopleCount && checkInDate && checkOutDate) {
                calculateBudget();
            }
            
            // ===== FUNCIONES PARA EL CALENDARIO =====
            // Manejo de pestañas del calendario
            const calendarTabs = document.querySelectorAll('.calendar-tab');
            const chaletCalendar = document.getElementById('chaletCalendar');
            const lilleCalendar = document.getElementById('lilleCalendar');
            
            calendarTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const cabin = this.getAttribute('data-cabin');
                    
                    // Actualizar pestañas activas
                    calendarTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Mostrar calendario correspondiente
                    if (cabin === 'chalet') {
                        chaletCalendar.style.display = 'block';
                        lilleCalendar.style.display = 'none';
                    } else {
                        chaletCalendar.style.display = 'none';
                        lilleCalendar.style.display = 'block';
                    }
                });
            });
            
            // ===== FUNCIONES PARA EL WIDGET DE WHATSAPP =====
            // Control del widget de WhatsApp
            const widget = document.querySelector('.whatsapp-widget');
            const toggleBtn = document.querySelector('.whatsapp-toggle');
            const closeBtn = document.querySelector('.close-chat');
            const quickBtns = document.querySelectorAll('.quick-btn');
            
            // Mostrar el botón toggle en móviles
            function checkScreenSize() {
                if (window.innerWidth <= 768) {
                    widget.style.display = 'none';
                    toggleBtn.style.display = 'flex';
                } else {
                    widget.style.display = 'block';
                    toggleBtn.style.display = 'none';
                }
            }
            
            // Verificar tamaño de pantalla al cargar y al redimensionar
            checkScreenSize();
            window.addEventListener('resize', checkScreenSize);
            
            // Toggle del widget en móviles
            if (toggleBtn) {
                toggleBtn.addEventListener('click', function() {
                    if (widget.style.display === 'none' || widget.style.display === '') {
                        widget.style.display = 'block';
                    } else {
                        widget.style.display = 'none';
                    }
                });
            }
            
            // Cerrar el widget
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    if (window.innerWidth <= 768) {
                        widget.style.display = 'none';
                    } else {
                        widget.style.display = 'none';
                        if (toggleBtn) toggleBtn.style.display = 'flex';
                    }
                });
            }
            
            // Acción para los botones rápidos
            quickBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const message = encodeURIComponent(btn.getAttribute('data-message'));
                    window.open(`https://wa.me/5215511393996?text=${message}`, '_blank');
                });
            });
        });
        
        // Función para determinar si una fecha está en temporada alta
        function isHighSeason(date) {
            const month = date.getMonth() + 1; // Enero = 1
            const day = date.getDate();
            
            for (const season of window.highSeasons) {
                if (season.month === month) {
                    if (season.startDay && season.endDay) {
                        // Rango específico de días (para diciembre)
                        if (day >= season.startDay && day <= season.endDay) {
                            return { isHigh: true, name: season.name };
                        }
                    } else {
                        // Mes completo
                        return { isHigh: true, name: season.name };
                    }
                }
            }
            
            return { isHigh: false, name: "Temporada Normal" };
        }
        
        // Función para parsear fechas en hora local (sin problemas de UTC)
        function parseDateLocal(dateStr) {
            const [year, month, day] = dateStr.split('-').map(Number);
            return new Date(year, month - 1, day);
        }
        
        // Función principal para calcular el presupuesto
        function calculateBudget() {
            // Ocultar resultados anteriores y errores
            document.getElementById('errorMessage').classList.remove('show');
            document.getElementById('resultContainer').classList.remove('show');
            document.getElementById('nightBreakdown').style.display = 'none';
            
            // Obtener valores del formulario
            const cabinType = document.getElementById('cabinType').value;
            const peopleCount = parseInt(document.getElementById('peopleCount').value);
            const checkInDate = parseDateLocal(document.getElementById('checkInDate').value);
            const checkOutDate = parseDateLocal(document.getElementById('checkOutDate').value);
            
            // Validaciones
            if (!cabinType) {
                showError('Por favor selecciona un tipo de cabaña.');
                return;
            }
            
            if (isNaN(peopleCount) || peopleCount < 1) {
                showError('Por favor ingresa un número válido de personas.');
                return;
            }
            
            if (isNaN(checkInDate.getTime()) || isNaN(checkOutDate.getTime())) {
                showError('Por favor ingresa fechas válidas.');
                return;
            }
            
            if (checkInDate >= checkOutDate) {
                showError('La fecha de salida debe ser posterior a la fecha de entrada.');
                return;
            }
            
            // Validar capacidad según cabaña
            let maxPeople, maxInBeds, maxExtra;
            let cabinName = '';
            
            if (cabinType === 'chalet') {
                maxPeople = 12;
                maxInBeds = 9;
                maxExtra = 3;
                cabinName = "Robertas Chalet";
            } else {
                maxPeople = 5;
                maxInBeds = 4;
                maxExtra = 1;
                cabinName = "Robertas Lille";
            }
            
            if (peopleCount > maxPeople) {
                showError(`La cabaña seleccionada tiene un máximo de ${maxPeople} personas.`);
                return;
            }
            
            // Calcular número de noches
            const timeDiff = checkOutDate.getTime() - checkInDate.getTime();
            const nights = Math.ceil(timeDiff / (1000 * 3600 * 24));
            
            if (nights < 1) {
                showError('La estancia debe ser de al menos una noche.');
                return;
            }
            
            // Calcular personas extra en sillones
            const extraPeople = Math.max(0, peopleCount - maxInBeds);
            
            if (extraPeople > maxExtra) {
                showError(`Solo se permiten hasta ${maxExtra} ${maxExtra === 1 ? 'persona' : 'personas'} extra en sillones para esta cabaña.`);
                return;
            }
            
            // Calcular precio por cada noche
            let totalCost = 0;
            let extraCost = 0;
            let nightDetails = [];
            let hasHighSeason = false;
            
            // Para determinar el precio base según número de personas
            // Si hay más personas que las cubiertas en la tabla, usar el máximo
            const priceKey = cabinType === 'chalet' ? 
                Math.min(peopleCount, 9) : 
                Math.min(peopleCount, 4);
            
            // Iterar por cada noche
            for (let i = 0; i < nights; i++) {
                // Crear fecha local (sin problemas de zona horaria)
                const currentDate = new Date(checkInDate.getFullYear(), checkInDate.getMonth(), checkInDate.getDate() + i);
                
                const dayOfWeek = currentDate.getDay(); // 0 = Domingo, 1 = Lunes, ..., 6 = Sábado
                
                // CORRECCIÓN: Solo Viernes y Sábado son fin de semana
                const isWeekend = dayOfWeek === 5 || dayOfWeek === 6; // 5 = Viernes, 6 = Sábado
                
                // Determinar temporada
                const seasonInfo = isHighSeason(currentDate);
                const isHigh = seasonInfo.isHigh;
                
                if (isHigh && !hasHighSeason) hasHighSeason = true;
                
                // Obtener precio base según día de la semana
                let basePrice;
                if (isWeekend) {
                    basePrice = window.prices[cabinType].weekend[priceKey];
                } else {
                    basePrice = window.prices[cabinType].weekday[priceKey];
                }
                
                // Aplicar factor de temporada alta si corresponde
                if (isHigh) {
                    basePrice = Math.round(basePrice * window.highSeasonFactor);
                }
                
                // Calcular extra por sillones
                const nightExtraCost = extraPeople * window.prices[cabinType].extraSofabed;
                
                // Costo total de esta noche
                const nightTotal = basePrice + nightExtraCost;
                totalCost += nightTotal;
                extraCost += nightExtraCost;
                
                // Guardar detalles de esta noche
                nightDetails.push({
                    date: currentDate,
                    dayName: getDayName(dayOfWeek),
                    isWeekend: isWeekend,
                    isHighSeason: isHigh,
                    basePrice: basePrice,
                    extraCost: nightExtraCost,
                    total: nightTotal
                });
            }
            
            // Formatear números como moneda
            const formatter = new Intl.NumberFormat('es-MX', {
                style: 'currency',
                currency: 'MXN'
            });
            
            // Mostrar resultados
            document.getElementById('resultCabin').textContent = cabinName;
            document.getElementById('resultPeople').textContent = `${peopleCount} personas (${extraPeople} en sillón)`;
            document.getElementById('resultNights').textContent = nights;
            
            const seasonText = hasHighSeason ? 
                '<span class="indicator high-season"></span>Temporada Alta (aplica incremento)' : 
                '<span class="indicator normal-season"></span>Temporada Normal';
            document.getElementById('resultSeason').innerHTML = seasonText;
            
            const avgPricePerNight = Math.round(totalCost / nights);
            document.getElementById('resultPricePerNight').textContent = formatter.format(avgPricePerNight);
            document.getElementById('resultExtraCost').textContent = formatter.format(extraCost);
            document.getElementById('resultTotal').textContent = formatter.format(totalCost);
            
            // Mostrar desglose por noches si hay más de 1 noche
            if (nights > 1) {
                let breakdownHTML = '';
                nightDetails.forEach((night, index) => {
                    const dateStr = night.date.toLocaleDateString('es-MX', { weekday: 'short', day: 'numeric', month: 'short' });
                    breakdownHTML += `
                        <div class="d-flex justify-content-between mb-2 p-2 ${index % 2 === 0 ? 'bg-light' : ''} rounded">
                            <div>
                                ${dateStr} 
                                <span class="indicator ${night.isWeekend ? 'weekend' : 'weekday'}"></span>
                                ${night.isHighSeason ? '<span class="indicator high-season" title="Temporada alta"></span>' : ''}
                            </div>
                            <div class="fw-semibold">${formatter.format(night.total)}</div>
                        </div>
                    `;
                });
                
                document.getElementById('nightDetails').innerHTML = breakdownHTML;
                document.getElementById('nightBreakdown').style.display = 'block';
            }
            
            document.getElementById('resultContainer').style.display = 'block';
            setTimeout(() => {
                document.getElementById('resultContainer').classList.add('show');
            }, 10);
        }
        
        function getDayName(dayIndex) {
            const days = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'];
            return days[dayIndex];
        }
        
        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            errorDiv.textContent = message;
            errorDiv.classList.add('show');
        }
    </script>

</body>

</html>
